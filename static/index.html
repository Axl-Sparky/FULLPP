<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Main Page</title>
    <script src="https://cdn.imagekit.io/v1.3.0/imagekit.min.js"></script>
</head>
<body>
    <h1>Upload Image</h1>
    <input type="file" id="imageUpload" accept="image/*">
    <button id="uploadBtn">Upload</button>
    <div id="imageUrlContainer"></div>

    <script>
        // Initialize ImageKit

const imagekit = require("imagekit");
        
        const kmagekit = new imageKit({
            publicKey: "public_ARts5MML/ERiyKDEUtgXx1VzUSI=", 
            privateKey: "private_ZMB1vkeatCK90ZLk46RczGA306s=", 
            urlEndpoint: "https://ik.imagekit.io/AjsalSparky"
        });

        document.getElementById('uploadBtn').addEventListener('click', async () => {
            const fileInput = document.getElementById('imageUpload');
            const file = fileInput.files[0];

            if (file) {
                try {
                    const fileBuffer = file; // File object
                    const fileName = `axl`; // Unique file name

                    const response = await kmagekit.upload({
                        file: fileBuffer,
                        fileName: fileName,
                    });

                    // Display the image URL
                    document.getElementById('imageUrlContainer').innerHTML = `
                        <p>Image uploaded successfully!</p>
                        <img src="${response.url}" alt="Uploaded Image">
                        <p>Image URL: <a href="${response.url}" target="_blank">${response.url}</a></p>
                    `;

                    // Redirect to another page after a delay
                    setTimeout(() => {
                        window.location.href = "https://wp-ban-by-axl.vercel.app/"; // Replace with your target URL
                    }, 3000); // Redirect after 3 seconds
                } catch (error) {
                    console.error("Upload error:", error);
                }
            } else {
                alert('Please select an image to upload.');
            }
        });
    </script>
</body>
</html>
